@page "/login"
@inject NavigationManager NavigationManager

@code
{
    private async Task SignInWithDiscord()
    {
        var oauthClient = CurrentApplication.OAuthClient;
        Console.WriteLine(oauthClient.RedirectUri);
        var authUrl = oauthClient.GenerateOAuth2Url("identify guilds", oauthClient.GenerateState());
        Console.WriteLine(authUrl);
        NavigationManager.NavigateTo(authUrl.ToString());
    }

    protected override async Task OnInitializedAsync()
    {
        await SignInWithDiscord();
    }
}
